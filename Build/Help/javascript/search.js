//Copyright 2004 Knowledge Matters, Inc.
//Code written by Brock Bouchard
//6-11-04


//for holding the last search query
var lastSearchResult = "";

//stores search results
var searchResults = new Array();

//below are arrays containing the list of topics,
//topic texts, and definitions.  This is what we search.

var BASICS_CalloutText = new Array("Welcome to the Tutorial. This program will help you to better understand the views and menus found within this simulation.<br />");
var Overview_CalloutText = new Array("You may end this Tutorial at any time by closing the browser.","In Virtual Business - Personal Finance (VBPF), you will manage your life.<br />","You normally begin VBPF by completing the lessons and then moving on to the New Career Project and competitions.","Within this simulation, you will choose a location to live . . .<br />",". . . find a job . . .",". . . manage your money . . .",". . . organize your own schedule . . . ",". . . maintain your health . . .",". . . buy food and goods . . .",". . . and invest.","You will be judged on your net worth.");
var Assignments_CalloutText = new Array("Whenever you open a lesson or start your project portfolio, the first thing displayed is the option to view or print your assignment.","This is an example of an assignment. ","If you ever need to reopen the assignment, here is the Assignment button to do so.<br />");
var Getting_Around_CalloutText = new Array("As you run VBPF, time passes. You can always find the date and time down here.","If you want to stop time in order to make some decisions, click this STOP button.","To restart time, click the green GO button.","The rate of time passing is controlled by these FASTER and SLOWER buttons.","Your net worth is found here.");
var Message_Center_CalloutText = new Array("This is your Message Center. It tells you if you have bills waiting, if you are late for work or school, if you are out of food, . . .",". . . if your car has broken down, if you are sick, if you have lost your job, etc. It is critical that you monitor your messages.","You may close the Message Center at any time by clicking this box.","A yellow envelope indicates that you have new messages. Click it and the message screen will reappear.");
var City_View_CalloutText = new Array("This view is the City view. ","It shows where you live. If you live in an apartment, you'll see this symbol.","If you live in a condo, you will see this symbol instead.","It also shows where you work and . . .",". . . where you go to school.","This symbol here always lets you know where you are during the day. You are at home right now.");
var Legend_CalloutText = new Array("To open the Legend, click here.","The legend will tell you what all of the buildings represent within the City view.","Any building that is listed in the legend is a building you can click on in the City view in order to accomplish an action.");
var Apartment_or_Condo_View_CalloutText = new Array("In order to enter your Apartment or Condo view, you click on your building and then select Enter.","Your apartment or condo will be unfurnished when you move in.");
var School_View_CalloutText = new Array("To enter a classroom, you must first click on the building and then click here.","You can observe yourself while you are in class.","If you click on your person while in this view, you'll see a message telling you course title and time to complete the course.");
var REPORTS_CalloutText = new Array("You have a number of reports available to you within this simulation.");
var Snapshot_CalloutText = new Array("In order to access the Snapshot, you may click here, or . . . ",". . . select it here under the Reports menu.","This report can stay open while you are running the simulation and time is passing.","The Snapshot tells you how your health is doing . . . ",". . . how many meals you have left . . .",". . . how many gallons of gas you have left if you own a car . . .",". . . and if your car is operating okay.","If you don't own a car, your Snapshot may look like this if you are taking the bus instead.","The Snapshot will show you how many bus tokens you have left.");
var Wealth_CalloutText = new Array("You may access your personal balance sheet by clicking here, or . . . ",". . . by clicking here under the Reports menu.","The Personal Balance Sheet lists your assets (things you own) . . .",". . . and your liabilities (things you owe) . . .",". . . which are used to calculate your net worth (Assets minus Liabilities).");
var Health_CalloutText = new Array("You may access your detailed Health report by clicking here, or . . .",". . . by clicking here under the Reports menu.","The Health report monitors your nutrition, sleep, exercise and relaxation.","During Levels 2 & 3 of the New Career Project, it also monitors your social life.","You need to make sure you schedule enough time for these activities or you will be at risk for poor health.","Your Health report will indicate when you are not doing enough of something. These bars will start shrinking.","You need to eat twice a day for a 1/2 hour each time. ","You need to allow a minimum of four hours in between the times you eat in order for this activity to have a positive effect.","You need to sleep for a minimum of six hours a day for this activity to effect you positively.","However, if you don't have a bed, you'll need twice as much sleep to get by.","You need to exercise for a minimum of two hours per day.","If you purchase a treadmill, this cuts down on the amount of time you need to exercise per day to one hour.","If you walk to school or work, this counts as exercise.","You need to relax for a minimum of two hours per day.","If you have a couch and TV, you may be able to get by with less relaxation time.","In Levels 2 or 3, you need to socialize by either hosting a party or attending a party at least once a month.","Caution, if no one attends your party, you don't get any credit for socializing.","When a bar changes from green to yellow, there is a chance that you will get sick.","When the bar changes from yellow to red, there is a very high likelihood that you will get sick.","You will receive this message in your message center.","And, you will not be able to leave your apartment for 24 hours. Too many absences can cause you to lose your job.");
var Resume_CalloutText = new Array("To access your resume, click here under the Reports menu.","Each time you complete a course or receive a degree, that information will appear here.","Your past and present work history will be recorded here.","The information on your resume will be helpful to you when applying for new jobs.");
var Credit_Score_CalloutText = new Array("You may view your Credit Score by clicking here under the Reports menu.","Your actual credit score is listed up here.","This tells you how your score fares in relation to the rest of the population.","Your credit score is often a determinant as to whether or not you qualify for certain types of loans or credit cards.");
var Credit_Report_CalloutText = new Array("To access your Credit Report, click here under the Reports menu.","Your credit report lists any credit that is open in your name.","This report also lists any late credit card or loan payments that you have accrued on your credit history.");
var Bank_Statements_CalloutText = new Array("To access your Bank Statements, click here under the Reports menu.","You can view statements for your checking or your savings account by clicking here.","If you want to look at different statements, you can click these arrows to move backwards or forwards.","Credits are amounts of money that have been deposited to your account.","Debits are amounts of money that have been withdrawn from your account.","The dates of your transactions are listed here.","After each transaction is made, the balance of your account is listed here.");
var Credit_Card_Statements_CalloutText = new Array("To access your credit card statements, click here under the Reports menu.","Your credit card statement shows you the date of your purchase, where you made your purchase and the amount.","The statement also lists your previous balance, any payments you have made, any credits that have been made to your . . .",". . . account, the total amount of your purchases during that period, any finance charges and your new balance on your card.","You accrue finance charges when you don't pay off the full balance on your credit card.","Your finance charge will depend on the APR you were offered when you signed up for your credit card.","If you do not pay your credit card bill on time, you will be charged a late fee.","If you need to look at a different month's statement, click these arrows to scroll forwards and backwards.");
var Loan_Statements_CalloutText = new Array("To access Loan Statements, click here under the Reports menu.","If you decide to take a class, you may have a student loan. You won't make payments on the loan until you finish the class.","If you have an auto loan or a mortgage, payments will start coming due the month after you make your purchase.","If you have taken different types of loans, you can choose which statement you'd like to view by selecting it here.","Your loan statement will tell you the total amount due for that particular month and it tells you what . . .",". . . the due date is.","It also tells you what your payoff amount would be if you decided to pay your loan off by a certain date.","And, it tells you how much interest has accrued during the month.","If you need to view different statements, click on these arrows to move backwards or forwards.");
var Investment_Statements_CalloutText = new Array("To view your Investment Statements, click here under the Reports menu.","You can look at the statements for your different funds, by making your selection here.","In VBPF, you can invest in a wide variety of mutual funds.","This statement shows you how much each fund was worth at the beginning of the month and . . .",". . . how much it was worth by the end of the month.","To look at statements from different months, click these arrows to move backwards and forwards.");
var Retirement_Statements_CalloutText = new Array("To access your Retirement Statements, click here under the Reports menu.","You can look at the statements for your different funds, by making your selection here.","In VBPF, you can invest in mutual funds for your retirement through your employer's 401K plan. ","This statement shows you how much each retirement fund was worth at the beginning of the month and . . .",". . . how much it was worth by the end of the month.","To look at statements from different months, click these arrows to move backwards and forwards.");
var Check_Register_CalloutText = new Array("To access your Check Register, click here under the Reports menu.","Your check register lists the date of your transaction.","It lists a description of your transaction.","It shows if the transaction was a payment/debit (withdrawn from your account) or . . .",". . . if the transaction was a deposit/credit (money was put into your account).","It then adds or subtracts the amount depending on the type of transaction and keeps a running balance of your account.","In the New Career Project, the check register is automatically filled in.","In the lesson, Choosing and Balancing a Checking Account, you fill in the register manually and balance your account.","If you have multiple checking accounts, you may select which check register you'd like to view by clicking here.");
var Pay__Tax_Records_CalloutText = new Array("To access your Pay andTax Records, click here under the Reports menu.","Your pay stub tells you how much you are witholding for taxes based on what you filled out on your W-4 form.","It tells you what your pay rate is.","It lists how many hours you worked and how much you earned for that particular pay period.","This statement also lists how much you have earned so far throughout the year.","Your statement lists how much money was deducted from the paycheck for various taxes and possibly retirement plans. ","This is your take home pay, the actual amount you received from your paycheck after all of the deductions.","If you'd like to view pay stubs from different years, you may click here and then make your selection.","If you want to view different month's statements, you may click on these arrows to move backwards and forwards.","To view your W-2 forms, you should click here. W-2 forms are sent to you by your employer each January.","Your W-2 form lists how much money you have earned throughout the past year here.","It lists how much money has been withheld for federal taxes here.","To view your 1099-INT form, click here. 1099-INT forms are sent by the bank each January.","The 1099-INT form lists how much interest you have earned throughout the year here.");
var Past_Tax_Returns_CalloutText = new Array("To view your Past Tax Returns, click here under the Reports menu. (You'll learn more about filliing out tax returns later.)","If you'd like to look at tax returns from previous years, click here and then make your selection.","Past tax returns from Levels 2 and 3 of the New Career Project will look like this. (Yes, a tax professional does them for you!)");
var Actions_Journal_CalloutText = new Array("To access the Actions Journal, click here under the Reports menu.","The actions journal keeps a record of all of the actions you have taken throughout the simulation.","It also creates this graph, showing how your decisions have impacted your net worth.");
var ACTIONS_CalloutText = new Array("In VBPF, you control all the financial actions that you will control in the real world.");
var Apartments_for_Rent_CalloutText = new Array("To rent an apartment, click here under the Actions menu.","This message will appear and asks you to make your selection in the City view.","IMPORTANT: You won't be able to control any of the other actions until you rent your apartment.","To see what kind of housing is available, you must scroll over buildings that look like this in the City view.","Messages like this will pop up and will tell you what the lease terms are.","Apartments that are further from the downtown area are usually less expensive.","This apartment is closer to the office buildings and has a higher rent per month.","Before selecting your apartment, you may want to see where potential jobs are located.","For simplicity, all of the apartments are one bedroom with the same layout.","If you want to rent an apartment, you must first click on the building and then click here.","If this is the first time you are renting an apartment, you are asked to choose a person to represent you.","Choose your person by clicking on that person.","You must then type in the name of your person here.","When you are done, click here.","After you've done this, you will then receive a confirmation message letting you know that you got the apartment.","Once you have rented an apartment, your apartment will be labeled like this.");
var Transportation_CalloutText = new Array("To access Transportation, click here under the Actions menu.","This screen will then appear and you have to decide if you will travel by foot, bus, or by car.","Once you have made your choice, you must click here.","If you decide to travel by bus, you must be sure to purchase bus tokens.","You must have either purchased or leased a car to choose this option.","Some transportation options can take longer than others. Be sure to consult your schedule when deciding on your transportation.","If you live close to a bus stop, this is usually a feasible mode of transportation.","If you live close to where you work, you can usually use walking as your mode of transportation.","If you work as a pizza delivery person or pharmaceutical sales person, you will be required to have a car.");
var Schedule_CalloutText = new Array("To access your schedule, click here.","Or, you may access it here under the Actions menu.","This form allows you to plan your weekday schedule . . . ",". . . as well as your weekend schedule.","In order to schedule an activity, you must click on the activity.","This screen will then appear. You must select the start time of your activity by clicking on a time here.","Then you must select the end time for your activity by making a selection over here.","Once you are done making your selections, you should click here.","Once you have scheduled an activity, it will show up in your schedule.","When you apply for a job and are hired, your schedule will be filled in automaticlly for  work.","If you try to apply for a job that you don't have room for in your schedule, you will receive this message.","These pink bars represent your estimated travel time to get from place to place.","This particular schedule is using a car for transportation.","To change your mode of transportation, you may click here.","Some modes of transportation will take longer than others depending on where you live.","Be careful, because some modes of transportation won't get you to work on time.","If you want to quit an activity, you need to click on that activity . . .",". . . and then click here.","You can also change the time of an activity by clicking on that activity . . . ",". . . and then by clicking on different start or end times. You will then have to click \"OK\" after you make your changes.","Some jobs offer health benefits. To see if your current job offers them, you must first click here.","If this picture appears on this screen, then that means your current job offers health insurance.");
var Socializing_CalloutText = new Array("Once you have made it to Level 2 of the New Career Project, you will be able to start hosting and attending parties.","To host a party, click here.","To plan your party, you need to choose a date by clicking on it.","You must then choose a starting and ending time for your party.","Click here once you've made your selections.","Once you have scheduled your party, it will show up here. Be sure to have music and party food or no one may come.","If you planned your party a few days in advance and have food and music, this is what a party will look like.","Once you start hosting parties, you will be invited to other peoples' parties. If you want to attend, click inside the box.","Once you have made your selections or changes, click here to exit this screen.");
var Condos_For_Sale_CalloutText = new Array("In Level 3 of the New Career Project you can buy condos. To access Condos For Sale, you may click here.","This message will appear and asks you to make your selection in the City view.","To see which buildings are condos, mouse around the City view over buildings that look like this.","If the building is a condo, a message like this will appear. ","If you'd like to buy the condo, you should click on the building and then click here.","If your credit score is too low, you will receive this message. You don't qualify for a loan and you'd have to pay in full.","If your credit score is too low, you'll be required to pay in full. Note, the down payment is the sale price!","If you do qualify for a loan, you'll be offered a mortgage.","You can change the amount of your down payment by clicking these arrows here.","When you increase or decrease your down payment, the amount of your mortgage will change . . .",". . . as well as the amount of your monthly payment.","If your down payment is at least 20%, you won't be required to pay PMI (Private Mortgage Insurance).","Paying points, a fee do at closing, can reduce your interest rate and monthly payments.","The type of mortgage you select will affect your monthly payment.","If you have multiple bank accounts and you'd like to choose a different account, click here and make your selection.","After you have made your mortgage selections, the amount of money you will need for your closing will be listed here.","Click here when you are finished.","This screen will then appear. It explains that you must purchase insurance for your new condo.","This tells you the value of your condo.","You will be able to decide the amount of coverage you'd like for your condo by clicking these arrows.","You may then decide the amount of your deductible by clicking here and then making your selection.","The amount of your deductible is how much you will have to pay if something happens to the condo.","After you have made your selections, your yearly premium will be calculated and it  will appear here.","Click here when you are done.","Once you have purchased your condo, you will be asked if you want to move in right away.","You may do so, but if you have any months left on your lease, you will have to pay for them.","If you decide to move into your condo at a later time, you should click on the condo and then select here.","Once you have purchased your condo, it will be labeled like this in the City view.","You can purchase as many condos as you can afford.","If you decide you'd like to change the insurance for your condo, you may click on the condo and then select here.");
var Work_CalloutText = new Array("To access Work, click here under the Actions menu.","This message will appear and asks you to make your selection in the City view.","If you mouse over this view, you will be able to find the job opportunities available to you.","This particular job doesn't require any experience or course credits.","It lists the job title, hours, days and hourly pay here.","If you don't have room in your schedule for this job, you should clear your schedule first or choose a different job.","You will also see any benefits your job may offer listed here.","Other types of job opportunities may require experience and course credits.","You may also see the same job opportunity listed, but they are for different days during the week or weekend.","Here is an opportunity for a store manager.","Here is an opportunity for a data entry specialist.","This is a job opportunity for an IT supervisor.","This one is for the vice president of IT. It requires a Bachelor's Degree and a lot of work experience.","Here are job opportunities for a web designer and software engineer.","Here is a job opportunity for a VP of Engineering.","The hourly pay rate is lower for these jobs compared to the other IT jobs, but there is opportunity for bonuses.","This job opportunity is for a pharmaceutical salesperson.","Here are available opportunities for a nurse, doctor and resident.","Here are opportunities for a pizza delivery person.","To apply for a job, you must click on the company's building and then make your selection here.");
var Applying_For_A_Job_CalloutText = new Array("The job application will appear and you must type in the correct name you used for your person here.","If you forget the name of your person, you may look at the resume under the Reports menu and you'll see it listed here.","You must then click here and make your selection if you have completed any courses or degrees.","Click here and select any job experience.","You can enter your months of experience by typing the number directly into this box or by using these arrow buttons.","If you have access to an automobile, you should click here. The job description will tell you if a car is required.","Once you have completed the application, you should click here.","If you have listed any false information on your resume, you will receive a message like this.","If you got the job, you will receive this message.");
var Getting_Paid_CalloutText = new Array("You will then need to determine how you would like to be paid by clicking inside the bubble next to the option of your choice.","If you choose direct deposit and you have multiple checking accounts, you must select your account by clicking here.","Once you are done making your selections, you must click here.","Then, a W-4 form will appear. A W-4 form is an IRS form that lets you choose how much tax to have withheld.","You can accept the defaults or choose to have more or less tax withheld.","When you are done, you may click here.","If this is the first job you have applied for, you will receive this message.","You will then have to select your mode of transportation by clicking in the bubble beside  your choice.","If you have been hired, your schedule will automatically be filled in.","Make sure you keep an eye on your estimated travel time so that you make it to work on time.","If you are late for work or if you have been laid off or fired, you will receive these types of messages here.","If you quit a job (via your schedule), you will not be able to reapply for 90 days.");
var Education_CalloutText = new Array("To access Education, click here under the Actions menu.","You will then receive this message which asks you to mouse-over buildings in the City view to find your course.","When you mouse-over these buildings, you will see course descriptions pop up.","This particular building houses courses for an Associate's Degree and Food Service MGT I.","This screen gives you information regarding course title, hours, days, cost and length.","You also have a Bachelors Degree option as well as . . .",". . . Intro To Data Entry and IT Management. . .",". . . Nursing Degree and Medical Degree . . ."," . . . And Web Design.","If you'd like to enroll in a course, you must first click on the building that offers the course and then make the selection.","You should make sure your schedule is free at the time you'd like to take the course. ","Your course will appear on your schedule automatically once you decide which one you are going to take.");
var Student_Loans_CalloutText = new Array("This student loan screen will appear after you have made your course selection.","This screen lists the cost of the course.","You may request the loan amount by typing it in here or by clicking these arrow buttons.","The interest rate on your loan appears here.","Your first payment will not be due until after the completion of the course.","The number of payments you will have to make will be listed here.","The amount of your monthly payment will be listed here. It is dependent on the amount of  loan that you requested.","The total payments you will make on the loan is listed here.","If you have decide to partially pay for the course up front, the amount you have elected to pay will be listed here.","You must decide how you will be paying your balance by clicking here and then making your selection.","If you don't have a bank account open at the time you apply for this loan, you will have to take a loan for the full course amount.","Once you have finished your course or degree, a diploma will appear here on the wall in your apartment.");
var Taxes_CalloutText = new Array("To access Taxes, click here under the Actions menu.","You will not be able to file your taxes until after you receive this message on Jan. 1. You must file taxes by April 15.","Once that has happened, you'll want to retrieve your pay and tax records from the past year so that you can file your taxes.","The dollar amounts entered on this screen should be whole dollar amounts. ","You must fill in the amount of money you earned during the past year here.","This info is found on your W-2 form.","You must fill in any interest you've earned during the past year here. ","This may be found on your 1099-INT form.","You'll want to add the amounts you entered in lines 1 and 2 and enter it here.","Since you are single, you'll want to enter $8,450 on this line.","You'll need to subtract line 5 from line 4 and enter it here. This is your taxable income.","If line 5 is greater than line 4, you will enter a zero here which means you don't have any taxable income.","Enter the amount of taxes you have already paid to the federal government during the year here. ","This may be found on the W-2.","You must then use the tax table by clicking this link in order to find out what taxes you owe the government.","This Tax Rate Schedule will appear.","You must determine which tax category you fall into based on your taxable income which is line 6 on your 1040EZ form.","Once you figure out your tax category, you need to take this first number in the appropriate row and add it to . . . ",". . . the percentage listed here which you must multiply by . . .",". . . the amount of your taxable income which is over the amount listed in this column.","You must then enter that number here.","If line 7 is larger than line 11, you should subtract line 11 from line 7 and this will be your refund.","However, if line 11 is larger than line 7, you should subtract line 7 from line 11 and this is the amount you owe.","Once you are done filling in your tax form, you must click here.","Once you have submitted your tax form, you will receive this confirmation.","If you owe money to the government, you will be asked which method you'd like to use for payment.","Here is an example of a completed 1040EZ tax form.","You may access your Past Tax Returns by clicking here under the Reports menu.","In the New Career Project, once you make it to Level 2, this is what your tax form will look like. A tax professional prepares it.");
var Change_Witholding_CalloutText = new Array("You can change the amount of taxes withheld from your paycheck. To Change Witholding, click here.","You will then receive this message which . . . ",". . . asks you to click the Schedule button and then . . . ",". . . click here . . .",". . . and then here.","You may then change your witholding amount by entering a new number here.","After you  have made your changes, you should then click here.","If you do not withhold enough money, you may end up owing a lot of taxes in April.");
var Change_Method_of_Payment_CalloutText = new Array("You can change how you are paid. To access Change Method of Payment, click here under the Actions menu.","You will then receive this message which asks you . . . ",". . . to click here on the Schedule button.","You must then click here . . .",". . . and then here.","This screen will then appear and you may then click next to the option of your choice.");
var Change_Retirement_Contribution_CalloutText = new Array("You can change 401K retirement contributions.To access Change Retirement Contribution, you should click here.","This message will appear which asks you to . . ",". . . click here on the Schedule button and then . . .",". . . click here.","You must then click here.","This screen will appear. You may make your changes and then click \"OK\".");
var Pay_Bills_CalloutText = new Array("Bills arrive on the 28th of each month. To access Pay Bills, you may click here under the Actions menu.","Or, you may click here on the stack of bills found in your Apartment or Condo view.","This screen will appear.","To pay your bill, click here.","You may then click on the payment option of your choice.","If you decide to pay by check, your checkbook will then appear.","To change the amount of your payment, you may click within this area and alter the amount.","If you have different checking accounts, you may choose which account to use by clicking here and making your selection.","Once you are ready to submit your check, you may click here.","If you decide to pay by credit card, this screen will appear.","If you have multiple credit cards, you will have to select which card to use by clicking on it.","You may click here once you are ready to pay.","If you choose to pay by debit card, this screen will appear.","If you have multiple debit cards, you must choose the card you'd like to use for payment and then click \"OK\".","If you decide to pay by cash . . .",". . . you must make sure you have cash available. You can determine that by looking here in your Apartment view.","All bill payments are due by the 28th day the following month.","If you don't pay your bills on time, you will see this message on some of your bills. ","Not paying bills on time will affect your credit score negatively.");
var Banking_CalloutText = new Array("To access Banking, click here under the Actions menu.","This message will appear and will instruct you to mouse-over the bank buildings in the City view.","When you do so, you will see this type of information appear.","You'll find out if there is a monthly fee if you don't keep your checking account balance at a certain level.","You'll see what interest you'll earn on a savings account and if you'll be charged a monthly fee for the account.","You'll also see if the bank offers credit cards.");
var Open_Checking_Account_CalloutText = new Array("To open a checking account, you must click on the bank and then select here.","If this is your first account, your initial deposit  will have to be cash.","You may determine how much you'd like to deposit by typing in the amount here or by using these arrow buttons.","Once you are finished, you may click here.","You will receive this confirmation notice once your account has been opened.");
var Open_Savings_Account_CalloutText = new Array("To open a savings account, you should click on the bank of your choice and then select here.","This screen will appear. You must decide if your initial deposit will come from another account at the bank or from cash.","If you have multiple accounts at the bank, you will be able to choose your account by clicking here and then selecting.","You may enter the amount of your initial deposit by entering it here or by clicking on these arrow buttons.","After you have made your selections, you may click here.","You will receive this confirmation once the account has been opened.");
var Deposit_Funds_CalloutText = new Array("To deposit funds into your account, you must click on your bank and then select here.","This message will appear which asks you to either . . .",". . . click on the pile of cash in your Apartment or Condo view or . . .",". . . click on the check in your Apartment or Condo view.","When you are depositing cash, this screen will appear.","You will  need to choose to which account you'd like to deposit the money by clicking here and then making your selection.","You will then type in the amount you would like to deposit or you may choose the amount by using these arrow buttons.","You should then click here when you are finished.","If you click on a check, this screen will appear.","You must decide if you'd like to cash the check or deposit the check by clicking next to the option of your choice.","If you cash the check, the money will appear here.","If you deposit the check, you need to choose your account by clicking here and then making your selection.","If you have multiple checks, you will be able to scroll through by clicking on the backwards and forwards arrows.");
var Withdraw_Cash_CalloutText = new Array("If you'd like to withdraw funds, you first must click on your bank and then select here.","This window will appear.","You can decide from which account you'd like to withdraw your cash by clicking here and then making your selection.","You must then determine the amount you'd like to withdraw by entering it here or by using the arrow selection buttons.","Once you are done making your selections, you may click here.");
var Transfer_Funds_CalloutText = new Array("To transfer funds, you must click on your bank and then select here.","This screen will then appear.","You may choose from which account you'd like to take the money by clicking here and then making your selection.","You may choose to which account you'd like to move the funds by clicking here and then making your selection.","You may determine the amount you'd like to transfer by entering it here or by using the arrow buttons.","Once you have finished making your selections, you may click here.");
var Close_Account_CalloutText = new Array("If you want to close your bank account or cancel your credit card, you may first click on your bank and the select here.","This screen will then appear.","You must choose the account you'd like to close by clicking here and then making your selection.","Once you have made your choice, you may click here.");
var Online_Banking_CalloutText = new Array("To access Online Banking, you must click here under the Actions menu.","In order for you to be able to use online banking, you must own a computer.","You must also have an Internet connection in your apartment or condo.","In the New Career Project, you will not be able to access this option until you reach Level 2.","To pay your bills using online banking, you must first click here. These will be one time payments.","You may select the account you'd like to use to pay your bills by clicking here and then making your selection.","You must then type in the amount you'd like to pay here.","When you are finished, you may click here to schedule your payments.","If you need to return to the main page at any point, you can always click this link.","To set up recurring payments, you may click here.","You may select the account you'd like to use for payments by clicking here and then making your selection.","You may select which day during the month your payment willl be made by clicking here and making your selection.","You must then type in the amount you'd like to pay each month, by typing it in here.","When you are done making your selections, you may click here.","If you'd like to transfer funds using online banking, you may click here.","You must select the account from which you'd like to transfer your money by clicking here and making your selection.","You must then select the account to which you like to transfer the money by clicking here and making your selection","You will enter the amount of money you'd like to transfer by typing it in here or by using the arrow buttons.","When you are done making your selections, you may click here to perform the transfer.","To look at your checking account records, you may click here.","You will then be brought to this screen which gives you your checking account history.","To view your savings account information, you must click here.","You will then be brought to this screen which gives you your savings account history.");
var Credit_Cards_CalloutText = new Array("Smart credit card use is key to personal finance. To access Credit Cards, click here under the Actions menu.","This screen will appear which asks you to mouse-over the banks in the city view in order to check out your options.","To apply for a credit card, you must first click on a bank and then select here.","An offer screen will pop up which tells you what your interest rate would be . . .",". . . what your credit limit would be . . .",". . . as well as what your late payment fee would be.","Different banks will make different credit card offers.","If you'd like to accept an offer, you should click here.","If you ever need to cancel a credit card, you may click here.","To review your credit card statements, you may select the report here under the Reports menu.");
var Shop_For_Food_CalloutText = new Array("You'll need food to eat. To access Shop For Food, you must click here under the Actions menu.","Or, you may access the screen by clicking here in the Apartment view.","You may also access the screen by clicking on the supermarket in the City view.","You will be able to buy enough groceries to last you one, two or three weeks.","To make your selection, click here within one of these boxes.","Once you have made your selection, you may click here.","You will be able to see how much food is in the fridge by mousing-over the fridge.","You will also be able to see how much food is left in the fridge by clicking here on your Snapshot report.","Once you reach Level 2 of the New Career Project, you will be able to start hosting parties.","You will then be able to purchase party foods. ","If you offer food at your parties, more people will attend.","You can check multiple boxes at a time.","Once you purchase party foods, they will show up here in your Apartment or Condo view.");
var Shop_For_Goods_CalloutText = new Array("To access Shop For Goods, click here under the Actions menu.","This screen will appear which asks you to click on the department stores in the City view in order to compare prices.","Department stores look like this. You may find out the names of the stores by clicking on them in the City view.","Once you click on the store, this screen will appear. All the department stores offer the same range of goods.","You should check out all of the stores in the city because they offer different pricing and often times have sales.","If you'd like to purchase a certain item, click here in this box.","When you are done shopping, you may click here to pay.","When you move into your apartment, it is empty except for what you see here.","Once you purchase goods, you will see them show up in your apartment or condo.");
var Shop_For_Car_CalloutText = new Array("To access Shop For Car, click here under the Actions menu.","Or, you may click on the car dealership in the City view and click here. There is only one dealership in town.","This screen will appear which allows you to look at the car selection the dealership has to offer.","To buy a car, you must click here next to the car of your choice.","And then you must click here in order to pay.","This screen will appear. You must choose between buying the car . . .",". . . or leasing the car.","If you lease the car, you will be responsible for making the payment listed here each month.","Your lease will last for two years.","If you decide to terminate your lease before your time is up, you will be responsible for making this payment.","If you decide to buy the car, the price of the car will be listed here.","You may enter an amount for your down payment here or you may use these arrow buttons.","If you have multiple checking accounts you may click here and select the account you'd like to use for payment.","The amount that you finance in order to pay for the car will be dependent on what your down payment will be.","This is the interest rate you will be charged  on your monthly payments in order to borrow the money to pay for the car.","The interest rate is dependent on your credit score.","The total number of monthly payments that you will have to make is listed here.","The amount of your monthly payment will be listed here.","The amount listed here is what you will have ended up paying for the car after you are finished with all of your payments.","You'll notice that this  is greater than the sale price. This is because you are paying interest on the money you borrow.","The monthly and total payments are also dependent on the amount of your down payment.","When you are done making your selections, you must click here.","This screen will then appear. You are required to carry liability coverage on your vehicle. ","You are free to choose if you would like to carry collision coverage","If you choose to carry this coverage, you must click here and then select your deductible.","The amount of your premium is dependent on what you choose as your deductible.","Once you purchase or lease a car, you will see it appear in front of your apartment or condo in the City view.","You will be able to watch your car move in the City view  when you are traveling somewhere.");
var Sell_Car_CalloutText = new Array("To access Sell Car, click here under the Actions menu.","Or, you may click on the auto dealership and select here.","If you are leasing a car, this message will appear. You'll have to pay a penalty if you want to end your lease early.","A bill will then show up here so that you can pay your early termination penalty.","If you own the car, then this message will appear.","If you agree to the terms of the sale and you want to sell your car, then click here to confirm.");
var Shop_For_Gas__Repairs_CalloutText = new Array("If you own or lease a car, you'll need to buy gas.To access Shop For Gas and Repairs, click here under the Actions menu.","Or, you may click here on the Auto Garage.","This screen will then appear.","You may purchase 10, 20 or 30 gallons of gas by clicking here next to the appropriate selection","You may also purchase an oil change or a major repair if necessary by cliking in the box next to your selection.","You should get an oil change for your car every few months to help prevent the need for a major repair.","Once you are done making your selections, you may click here to pay.","You can always see how much gas your car has left by clicking on it in the City view . . .",". . . or, by clicking here on the Snapshot report.","If you don't have enough gas, you may not be able to get to class or work on time. ","If you are late too often, you may get fired from work or kicked out of school.");
var Buy_Bus_Tokens_CalloutText = new Array("To buy bus tokens, click here under the Actions menu.","Or, you may click on one of the bus stops to buy the tokens.","You may purchase bus tokens for 20, 60 or 100 rides.","To buy tokens, click in this box next to the appropriate selection.","Then you may click here to pay.","The bus tokens will appear here in your apartment or condo.","In order to see how many bus tokens you have left, you may mouse-over the stack of tokens and this message will appear.","Or, you may click here on your Snapshot report.","Remember, you can't take the bus if you don't have enough tokens. If you can't take the bus, you may be late for work . . .",". . . or school and if you're late too often, you may get fired or kicked out of school.");
var Internet_Access_CalloutText = new Array("To purchase Internet access, which is required for online banking, click here under the Actions menu.","This message will appear which asks you to click on the Internet provider in the City view.","Once you click on the Internet provider's building . . .",". . . you must then click here to activate your Internet subcription.","This confirmation message will then appear.","To cancel your Internet subcription, click on the Internet provider's building and then click here.","This message will appear confirming your cancellation.");
var Health_Insurance_CalloutText = new Array("Insurance is important for protecting your personal finances. ","To access Healthcare insurance, click here under the Actions menu.","Or, you may click here in the City view once you click on the insurance company building.","This screen will then appear. If your employer doesn't offer healthcare benefits, it is a good idea to sign up on your own.","To choose the type of coverage you'd like, you must click here and then make your selection.","The copay option you choose will determine your yearly cost for carrying the insurance.","Once you are finished making your decisions, click here.","You will be responsible for paying your health insurance bill each month.","This option means you will be responsible for $50 of your medical bill and the rest will be paid by the insurance company.","If you don't have health insurance, you will be responsible for paying all of your medical bills in full.");
var Renters_Insurance_CalloutText = new Array("To access Renter's insurance, click here. This insurance covers loss of property in your apartment.","Or, you may click here in the City view once you click on the insurance company's building.","This screen will appear. Right now, there is no coverage.","Type in the amount of coverage you'd like for your property here or use the arrow buttons to make your selection.","To choose the amount of your deductible, click here and then make your selection.","A deductible of $1000 means that if anything happens to your property, you will be responsible for $1000 of the damage.","Your insurance cost for the year is determined by your amount of coverage and your deductible.","Once you finish choosing your options, you should click here.","You will be responsible for paying your renter's insurance bill monthly.");
var Homeowners_Insurance_CalloutText = new Array("To access Homeowner's insurance, click here under the Actions menu.","Or, you may click here once you click on the insurance company's building.","This screen will appear. It asks you to click on your condo within the City view in order to change your homeowner's insurance.","When you first purchase your condo, you are required to get insurance.","At the time of purchase you would have filled out the information on this screen.","This screen tells you the market value of your condo.","You may choose the amount of coverage you want by typing it in here or by using these arrow buttons to make your selection.","You may choose the amount of your deductible by clicking here and then making your selection.","This deductible means you'll be responsible for $500 worth of any damage or theft that occurs in your home.","Once you own your condo, you may make changes to your insurance by clicking the condo and then selecting here.","You will be responsible for making monthly payments on your homeowner's insurance.");
var Auto_Insurance_CalloutText = new Array("To access automobile insurance, click here under the Actions menu.","Or, you may click on the insurance company and then click here.","This screen will then appear.","This is the estimated value of your car.","If you choose to have collision coverage, you may choose your deductible by clicking here and making your selection.","This means that you will have to pay up to $1000 for any collision damage done to your car in an accident.","Having liability coverage is mandatory.","This is how much your auto insurance will cost for the entire year. It is dependent on the amount of your deductible.","Click here once you are done with your selection.","You wil be responsible for making a monthly payment on your auto insurance.");
var Research_Funds_CalloutText = new Array("As your money grows, you will want to invest it. You can invest in a number of different mutual funds.","To Research Funds, click here under the Actions menu.","Or, you may click on the investment company in the City view and click here.","This screen will appear.","You may choose to research funds by category or all at once by clicking here and then making your selection.","To research a particular fund, click on it here.","The fund perfomance will be shown here.","If you click here, you will see a one year fund performance.","To see a five year performance, click here.","The fund's value and return information will be listed here.","If you want to export the funds' price histories to Excel, you may click here.");
var Buy_Shares_CalloutText = new Array("If you decide you would like to purchase some shares, you may click here.","This screen will appear.","To choose the fund you'd like to purchase, click here and then make your selection.","You may type in the dollar amount you'd like to purchase here or you may use these arrow buttons to make the selection.","Select any checking account or cash as your source of payment.","When you are done making your selections, you may click here.","When you are finished with this screen click here to exit.");
var View_Portfolio_CalloutText = new Array("To access View Portfolio, click here under the Actions menu.","Or, you may click on the investment company and then select here in the City view.","This screen will appear.","Here is a chart which describes your fund allocation.","Right  now you are most heavily invested in bonds and least invested in U.S. Stocks.","This report lists the funds you own, the number of shares of each fund, the price and change and the value of each fund.","If you want to review a fund, click on the fund . . .",". . . and this screen will appear.","If you want to buy more of a fund, click here and . . . ",". . . this screen will appear.");
var Sell_Shares_CalloutText = new Array("If you want to sell some of your shares, you need to click here and . . .",". . . this screen will appear.","To sell shares, you must click here and then select the fund you'd like to sell.","You must then either type in the dollar amount of the shares you'd like to sell or make your selection by using the arrow buttons.","Select to receive your proceeds in any checking account or as cash.","When you are finished making your selections, click here.","When you are done with this screen, you may click here to exit.");
var View_Retirement_Portfolio_CalloutText = new Array("To access View Retirement Portfolio, click here under the Actions menu.","Or, you may click on the investment company in the City view and then click here.","This screen will then appear.","This chart shows your fund allocation in your retirement portfolio.","This portfolio is highly invested in money market funds and least invested in bonds.","The retirement portfolio shows you how many shares of which funds you own as well as price and change and value info.","If you want to research a fund that you own, click on it and . . .",". . . this screen will appear.","If you want to sell shares that you own, click here and . . .",". . . this screen will appear.","If you sell shares from your 401K before you are 59 1/2 years old, you will have to pay a penalty.","You would have set up your retirement portfolio initially when you accepted this option from a new employer that offered one.","If you accepted this option, this screen would have appeared.","You may type in the percent of your paycheck that you'd like to withold  to put into your retirement account here.","The percentage that your company will contribute towards your retirement plan will appear here.","You must then decide in which funds you'd like to invest your retirement money.","You may scroll up and down to look at the funds by clicking here and moving this bar or by using the arrow buttons.","If you want to invest in a fund, you must type in the percentage you want to invest here or you may use the arrow buttons.","The percentages you enter must add up to 100%.","When you are done making your selections, you may click here.","You can change these allocations later. See Change Retirement Contribution.");
var USEFUL_TOOLS_CalloutText = new Array("Virtual Business - Personal Finance also includes a number of other useful tools. Here is an overview.<br />");
var Saving_CalloutText = new Array("To save a file, choose this option under the File menu.","You may choose a name for your file and save it to any directory you select.<br />");
var Loading_a_File_CalloutText = new Array("To load a file, you may choose either the New, Open Lesson, or Open Saved Sim option from the File menu.<br />");
var Printing_CalloutText = new Array("To print a view, select Print View from the File menu.<br />","This screen will pop up. Enter your name or initials to help identify your paper and click \"OK\".<br />","You are also able to print most of the reports by clicking on the \"print\" button within each report.<br />");
var Run_To_CalloutText = new Array("If you would like the simulation to stop on a certain date automatically, click here under the Options menu.<br />","Click here if you'd like to run the sim until a certain date.<br />","This is the date on which you are on currently.<br />","You must then click on the date on which you'd like for the simulation to stop and then click OK.<br />","If you would like to run the simulation for a certain amount of days or weeks, you should click here.<br />","Then you should select the number of days or weeks by clicking here.<br />","Then you need to select whether you are running it for a certain number of days or weeks and then you should click OK.<br />","To go back to running the simulation normally, select this button here and then click OK.<br />");
var Sounds_and_Music_CalloutText = new Array("To turn background music on or off, you must select or deselect this option found under the Options menu.<br />");
var Instructors_Area_CalloutText = new Array("For information about how to use the Instructor's Area found under the Options menu, please refer to the Teacher Guide.<br />");
var MULTIPLAYER_CalloutText = new Array("The Multiplayer function allows students to compete against one another within the same simulated economy.<br />");
var Start_Session_CalloutText = new Array("Access Multiplayer from the File menu when you are already in the program.<br />","To start a new multiplayer session, select this option found under Multiplayer from the File menu.","You will then be prompted with this screen asking you how many students you'd lik to have in the session.","You may type in the amount here or you may make your selection with the arrow buttons.","When you are done with your selection, you may click here.","After you make the students in the session decision, you will be asked to enter a session name of your choice here. <br />","Click here when you are done.","A new simulation is created. You can see your role as the \"host\" in the title bar along with the session name.<br />","During a multiplayer session, the host session is the only one that has the capability to save the session.","During a multiplayer session, the host controls stopping and starting the session as well as the speed of the session.");
var Join_Session_CalloutText = new Array("To join a multiplayer session, choose this option under Multiplayer from the File menu.","Enter the computer name (the name of the computer that started the session) here.","The Host name should have been provided to your instructor after the installation process was completed.<br />","Enter the Session Name which is the name typed in by the instructor when the multiplayer session was started.<br />","Enter the Team Name here which is chosen by you, but must be different from other teams in the session.<br />","After you fill this information in, click \"OK\". You will then be brought to the City view of the session you joined.<br />","The title bar of your main window should show your role as a host or client and the session name.<br />","Once you rent your apartment, all of the actions and reports will be enabled for you.");
var Scoreboard_CalloutText = new Array("A new button called the Scoreboard appears on the main toolbar during a multiplayer session.<br />","The scoreboard displays a bar graph indicating each player's net worth.<br />","At the end of a session you can click the \"Replay\" button to see how a player's profits changed and grew over time.<br />","If you would like to print this information, click here.");
var Team_List_CalloutText = new Array("Once a new session is created, the host session will show this Team List option found under Multiplayer from the File menu.","This screen lists all of the players that have joined a particular session. It includes players that have been eliminated. <br />","This list is only accessible from the host session.","Congratulations! You have finished the Virtual Business - Personal Finance tutorial. Good luck!<br />");

var topicList = new Array("BASICS","Overview","Assignments","Getting Around","Message Center","City View","Legend","Apartment or Condo View","School View","REPORTS","Snapshot","Wealth","Health","Resume","Credit Score","Credit Report","Bank Statements","Credit Card Statements","Loan Statements","Investment Statements","Retirement Statements","Check Register","Pay & Tax Records","Past Tax Returns","Actions Journal","ACTIONS","Apartments for Rent","Transportation","Schedule","Socializing","Condos For Sale","Work","Applying For A Job","Getting Paid","Education","Student Loans","Taxes","Change Witholding","Change Method of Payment","Change Retirement Contribution","Pay Bills","Banking","Open Checking Account","Open Savings Account","Deposit Funds","Withdraw Cash","Transfer Funds","Close Account","Online Banking","Credit Cards","Shop For Food","Shop For Goods","Shop For Car","Sell Car","Shop For Gas & Repairs","Buy Bus Tokens","Internet Access","Health Insurance","Renters Insurance","Homeowners Insurance","Auto Insurance","Research Funds","Buy Shares","View Portfolio","Sell Shares","View Retirement Portfolio","USEFUL TOOLS","Saving","Loading a File","Printing","Run To","Sounds and Music","Instructor's Area","MULTIPLAYER","Start Session","Join Session","Scoreboard","Team List");
var safeTopicList = new Array("BASICS","Overview","Assignments","Getting_Around","Message_Center","City_View","Legend","Apartment_or_Condo_View","School_View","REPORTS","Snapshot","Wealth","Health","Resume","Credit_Score","Credit_Report","Bank_Statements","Credit_Card_Statements","Loan_Statements","Investment_Statements","Retirement_Statements","Check_Register","Pay__Tax_Records","Past_Tax_Returns","Actions_Journal","ACTIONS","Apartments_for_Rent","Transportation","Schedule","Socializing","Condos_For_Sale","Work","Applying_For_A_Job","Getting_Paid","Education","Student_Loans","Taxes","Change_Witholding","Change_Method_of_Payment","Change_Retirement_Contribution","Pay_Bills","Banking","Open_Checking_Account","Open_Savings_Account","Deposit_Funds","Withdraw_Cash","Transfer_Funds","Close_Account","Online_Banking","Credit_Cards","Shop_For_Food","Shop_For_Goods","Shop_For_Car","Sell_Car","Shop_For_Gas__Repairs","Buy_Bus_Tokens","Internet_Access","Health_Insurance","Renters_Insurance","Homeowners_Insurance","Auto_Insurance","Research_Funds","Buy_Shares","View_Portfolio","Sell_Shares","View_Retirement_Portfolio","USEFUL_TOOLS","Saving","Loading_a_File","Printing","Run_To","Sounds_and_Music","Instructors_Area","MULTIPLAYER","Start_Session","Join_Session","Scoreboard","Team_List");
var definitionList = new Array("1040EZ","1099INT","1099MISC","401(k) plan","Abilities","Account Transfer","Adjustable-Rate Mortgage","Advancement","Annuities","Apprenticeship","APR","APR (Credit Cards)","Aptitude","Asset Class","Associate's Degree","ATM","Automobile Insurance","Bachelor's Degree","Back End Load","Balancing A Checking Account","Bank","Bank Statement","Bankruptcy","Basic Checking Account","Basic Needs","Bear Market","Beneficiary","Benefits","Blue Chip Stock","Bonds","Budget","Bull Market","Capital Gain","Capital Loss","Career","Career Ladder","Career Path","Certified Mail","Check","Check Cashing Service","Check Register","Closing Costs","Cold Call","College","Collision Insurance","Common Stock","Community College","Comparison Shopping","Condominium","Contract","Cooperative Education","Cost of Living","Coupe","Cover Letter","Coverage","Credit","Credit Card","Credit History","Credit Report","Creditor","Debit Card","Debtor","Deductible","Defensive Stock","Deficit","Defined-benefit plan","Defined-contribution plan","Dependents","Direct Deposit","Disability Insurance","Diversification","Dividend","Dividends","Down Payment","Education","Employer-sponsored retirement plan","Entry Level","Equity","Everyday Living","Expenditure","Expense Ratios","Fair Credit Reporting Act","FDIC Insured","Fees","FICA","FICO Expansion Score","FICO Score","Finance Charge","Fixed Expense","Fixed-Rate Mortgage","Flexible Expense","Foreclosure","Fraud","Front End Load","Goals","Grants and Scholarships","Gross Income","Growth Stock","Health","Health Insurance","Homeowners Insurance","Identity Theft","Income","Income Tax","Individual Retirement Account","Inflation","Installment Loan","Insurance","Interest Rate","Interest-Bearing Checking Account","Internet","Internet Access","Internship","Introductory Rate","Investment Portfolio","Job","Keogh plan","Landlord","Large-Cap Stock","Late Fees","Lease","Lease (Apartment)","Liability Insurance","Lien","Life Insurance","Loan","Location","Minimum Payment","Minivan","Moderation","Money Market","Mortgage","Mutual Fund","No-Fault Auto Insurance","Notice","Nutrition","Occupational Training Programs","Online Banking","Opportunity Cost","Overdrafts","Password","Pension","Personal Identification Number (PIN)","Personal Information","Personal Investing Plan","Phishing","PMI (Private Mortgage Insurance)","Points","Policy","Premium","Primary Need","Principal","Private Corporation","Public Corporation","Rate of Return","Recall","Recurring Payments","Rent","Renters Insurance","Resume","Retirement","Return","Risk","Roth IRA","Salary","Savings","Savings Account","Secondary Need","Security Deposit","Sedan","Sedentary","Single Family Home","Skills","Small-Cap Stock","Social Security","Standard Deduction","Standard of Living","Stress","Student Loan","Surplus","SUV (Sport Utility Vehicle)","Take-Home Pay","Tax Audit","Tax Deduction","Tax Exemption","Tax Refund","Tax Table","Tenant","Term","Term Life Insurance","Time as an Investment","Time Management","Unexpected Expense","Unit","University","User Name","Utilities","Value","Values","W2","W4","Want","Warranty","Whole Life Insurance","Year to Date Return (YTD)","Yield");
var safeDefinitionList = new Array("NuM1040EZ","NuM1099INT","NuM1099MISC","NuM401k_plan","Abilities","Account_Transfer","Adjustable-Rate_Mortgage","Advancement","Annuities","Apprenticeship","APR","APR_Credit_Cards","Aptitude","Asset_Class","Associates_Degree","ATM","Automobile_Insurance","Bachelors_Degree","Back_End_Load","Balancing_A_Checking_Account","Bank","Bank_Statement","Bankruptcy","Basic_Checking_Account","Basic_Needs","Bear_Market","Beneficiary","Benefits","Blue_Chip_Stock","Bonds","Budget","Bull_Market","Capital_Gain","Capital_Loss","Career","Career_Ladder","Career_Path","Certified_Mail","Check","Check_Cashing_Service","Check_Register","Closing_Costs","Cold_Call","College","Collision_Insurance","Common_Stock","Community_College","Comparison_Shopping","Condominium","Contract","Cooperative_Education","Cost_of_Living","Coupe","Cover_Letter","Coverage","Credit","Credit_Card","Credit_History","Credit_Report","Creditor","Debit_Card","Debtor","Deductible","Defensive_Stock","Deficit","Defined-benefit_plan","Defined-contribution_plan","Dependents","Direct_Deposit","Disability_Insurance","Diversification","Dividend","Dividends","Down_Payment","Education","Employer-sponsored_retirement_plan","Entry_Level","Equity","Everyday_Living","Expenditure","Expense_Ratios","Fair_Credit_Reporting_Act","FDIC_Insured","Fees","FICA","FICO_Expansion_Score","FICO_Score","Finance_Charge","Fixed_Expense","Fixed-Rate_Mortgage","Flexible_Expense","Foreclosure","Fraud","Front_End_Load","Goals","Grants_and_Scholarships","Gross_Income","Growth_Stock","Health","Health_Insurance","Homeowners_Insurance","Identity_Theft","Income","Income_Tax","Individual_Retirement_Account","Inflation","Installment_Loan","Insurance","Interest_Rate","Interest-Bearing_Checking_Account","Internet","Internet_Access","Internship","Introductory_Rate","Investment_Portfolio","Job","Keogh_plan","Landlord","Large-Cap_Stock","Late_Fees","Lease","Lease_Apartment","Liability_Insurance","Lien","Life_Insurance","Loan","Location","Minimum_Payment","Minivan","Moderation","Money_Market","Mortgage","Mutual_Fund","No-Fault_Auto_Insurance","Notice","Nutrition","Occupational_Training_Programs","Online_Banking","Opportunity_Cost","Overdrafts","Password","Pension","Personal_Identification_Number_PIN","Personal_Information","Personal_Investing_Plan","Phishing","PMI_Private_Mortgage_Insurance","Points","Policy","Premium","Primary_Need","Principal","Private_Corporation","Public_Corporation","Rate_of_Return","Recall","Recurring_Payments","Rent","Renters_Insurance","Resume","Retirement","Return","Risk","Roth_IRA","Salary","Savings","Savings_Account","Secondary_Need","Security_Deposit","Sedan","Sedentary","Single_Family_Home","Skills","Small-Cap_Stock","Social_Security","Standard_Deduction","Standard_of_Living","Stress","Student_Loan","Surplus","SUV_Sport_Utility_Vehicle","Take-Home_Pay","Tax_Audit","Tax_Deduction","Tax_Exemption","Tax_Refund","Tax_Table","Tenant","Term","Term_Life_Insurance","Time_as_an_Investment","Time_Management","Unexpected_Expense","Unit","University","User_Name","Utilities","Value","Values","W2","W4","Want","Warranty","Whole_Life_Insurance","Year_to_Date_Return_YTD","Yield");

//retrieves the value of the specified query string variable from the
//current page's url
function getQueryVariable(variable)
{
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i=0;i<vars.length;i++)
    {
        var pair = vars[i].split("=");
        if (pair[0] == variable)
        {
             return pair[1];
        }
    } 
    return "";
}

//gets the query and goes to search if the user indeed entered a value
function go()
{
    var query = escape(document.forms["searchForm"].queryTextBox.value);
    if(query != "")
    {
        window.parent.location.replace("index.htm?search=true&query=" + query + "&lastSearchResult=" + lastSearchResult);
    }
    else
    {
        alert("Please enter text to search for.");
    }
}

//the search guts
//
//basically it checks each word of the query against all the words in the
//topic list, definitions, then topic texts.
function search()
{
    var i, j, k;
    var tempLink;
    var tempLinkText;
    var tempContext;
    var tempTopic;
    var tempResult;
    
    var query = getQueryVariable("query");
    
    if(query == "")
    {
        alert("Please enter text to search for.");
        return;
    }
    
    query = preProcessQuery(query);
    
    //regular expression variable
    var re;
    //an array containing only alphanumeric words from the query string
    var queryWords = getWords(query);
    //an array containing only alphanumeric words of a TOC heading
    var topicWords;
    //an array containing only alphanumeric words of a topic's text
    var textWords;
    //an array containing only alphanemeric words from a definition
    var definitionWords;
    
    //search through topic titles for word matches
    for(i=0; i<topicList.length; i++)
    {
        //get the words to the topic title
        topicWords = getWords(topicList[i]);
        //find matches between query words and topic title words
        for(j=0; j<topicWords.length; j++)
        {
            for(k=0; k<queryWords.length; k++)
            {
                if(topicWords[j].toLowerCase() == queryWords[k].toLowerCase())
                {
                    tempLink = "javascript:window.parent.location.replace(\"index.htm?topic=" + safeTopicList[i] + "&index=0&lastSearchResult=" + escape(query) + "\");";
                    re = new RegExp(eval("/\\b" + topicWords[j] + "\\b/gi"));
                    tempLinkText = topicList[i].replace(re, "<b>" + topicWords[j] + "</b>");
                    tempContext = "Topic: " + topicList[i].replace(re, "<b>" + topicWords[j] + "</b>");
                    tempTopic = topicList[i];
                    tempResult = new SearchResult(tempLink, tempLinkText, tempContext, tempTopic);
                    searchResults = searchResults.concat(new Array(tempResult));
                }
            }
        }
    }
    
    //search through definitions (term only, not text)
    for(i=0; i<definitionList.length; i++)
    {
		//get the words to the definition
        definitionWords = getWords(definitionList[i]);
        //find matches between query words and definition words
        for(j=0; j<definitionWords.length; j++)
        {
            for(k=0; k<queryWords.length; k++)
            {
                if(definitionWords[j].toLowerCase() == queryWords[k].toLowerCase())
                {
                    tempLink = "javascript:window.parent.location.replace(\"index.htm?topic=DEFINITIONS&term=" + safeDefinitionList[i] + "&lastSearchResult=" + escape(query) + "\");";
                    re = new RegExp(eval("/\\b" + definitionWords[j] + "\\b/gi"));
                    tempLinkText = definitionList[i].replace(re, "<b>" + definitionWords[j] + "</b>");
                    tempContext = "Definition: " + definitionList[i].replace(re, "<b>" + definitionWords[j] + "</b>");
                    tempTopic = definitionList[i];
                    tempResult = new SearchResult(tempLink, tempLinkText, tempContext, tempTopic);
                    searchResults = searchResults.concat(new Array(tempResult));
                }
            }
        }
    } 
    
    //search through topic texts for word matches
    for(i=0; i<topicList.length; i++)
    {
        var topicTextSections;
        //get sections of text for current topic (this will be an array indexed as topic pages are)
        eval("topicTextSections = " + safeTopicList[i] + "_CalloutText;");
        //the index within the current topic
        //alert(topicTextSections.length);
        var ti;
        for(ti=0; ti<topicTextSections.length; ti++)
        {
            topicText = getWords(topicTextSections[ti]);
            //alert(topicText);
            for(j=0; j<topicText.length; j++)
            {
                for(k=0; k<queryWords.length; k++)
                {
                    if(topicText[j].toLowerCase() == queryWords[k].toLowerCase())
                    {
                        tempLink = "javascript:window.parent.location.replace(\"index.htm?topic=" + safeTopicList[i] + "&index=" + ti + "&lastSearchResult=" + escape(query) + "\");";
                        re = new RegExp(eval("/\\b" + topicText[j] + "\\b/gi"));
                        tempLinkText = topicList[i];
                        tempContext = topicTextSections[ti].replace(re, "<b>" + topicText[j] + "</b>");
                        tempTopic = topicList[i];
                        tempResult = new SearchResult(tempLink, tempLinkText, tempContext, tempTopic);
                        searchResults = searchResults.concat(new Array(tempResult));
                    }
                }
            }
        }
    }

    //present results
    var resultHTML = "";
    if(searchResults.length <= 0)
    {
        resultHTML = "<p>Sorry, your search did not yield any results.  Please try again.</p>";
    }
    else
    {
        for(i=0; i<searchResults.length; i++)
        {
            resultHTML += searchResults[i].convertToHTML();
        }
    }
    
    //output the result of this search
    document.getElementById("resultsDiv").innerHTML = "<table width=\"100%\">" + resultHTML + "</table>";
}

//pre-process of the query
//change \ to \\
//change " to \"
//decodes url strings
function preProcessQuery(query)
{
	var result = unescape(query);
	var regStr1 = "[\\\\]";
	var regStr2 = "[\"]";
	var re1 = new RegExp(regStr1, "gi");
	var re2 = new RegExp(regStr2, "gi");
	result = result.replace(re1, "\\\\");
	result = result.replace(re2, "\\\"");
	return result;
}

//Parses alpha numeric words from a string and returns the words
//as an array (where each element of the array is a word).
//Also removes duplicate alphanumeric words.
function getWords(str)
{
    var re = new RegExp("[^a-zA-Z0-9]", "gi");
    var tokens = str.split(re);
    var words = new Array();
    var i, j;
    for(i=0; i<tokens.length; i++)
    {
        if(tokens[i].toString() != "")
        {
            var duplicate = false;
            for(j=0; j<words.length; j++)
            {
                if(tokens[i].toLowerCase() == words[j].toLowerCase())
                {
                    duplicate = true;
                    break;
                }
            }
            if(!duplicate)
            {
                words = words.concat(new Array(tokens[i]));
            }
        }
    }
    return words;
}

//called when the search.htm page is loaded; checks for a search
//query and initializes search
function pageLoad()
{
    //check to see if this page was loaded directly;
    //if so, redirect to the frameset.
    if(window.parent == window)
    {
        window.location.replace("index.htm?search=true");
    }
    
    lastSearchResult = getQueryVariable("lastSearchResult");
    
    var query = getQueryVariable("query");
    if(query != "")
    {
        window.parent.frames["HelpSearchFrame"].document.forms["searchForm"].queryTextBox.value = unescape(query);
        document.forms["searchForm"].queryTextBox.value = unescape(query);
        search();
    }
}

//===========================================================================
//Search Result Object Definition

//contstructs a new SearchResult object
//the intent for a search result is to have a link and then a body
//of text below it (kind of like google)
//link: the url to the this SearchResult's match
//linkText: the text to appear as the link for this SearchResult
//context: the text to appear below the link that shows the user in what
//context a match was found
//topic: the TOC heading that the corresponds to the match found
function SearchResult(link, linkText, context, topic)
{
    //Properties
    this.Link = link;
    this.LinkText = linkText;
    this.Context = context;
    this.Topic = topic;
    //Methods
    this.convertToHTML = convertToHTML;
    this.equals = equals;
}

//converts a search result to its HTML format and returns the HTML as a string
function convertToHTML()
{
    var html = "\r\n<tr><td><a href='" + this.Link + "'>" + this.LinkText + "</a><br />";
    html += this.Context + "<br /><span>Topic: " + this.Topic + "</span></td></tr>\r\n";
    return html;
}

//determines if this SearchResults object is equal to the give SearchResult object
//and returns true or false.
function equals(sr)
{
    if(this.Link == sr.Link && this.LinkTest == sr.LinkText
        && this.Context == sr.Context && this.Topic == sr.Topic)
    {
        return true;
    }
    else
    {
        return false;
    }
}
